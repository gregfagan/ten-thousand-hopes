{"version":3,"sources":["ui/Button.js","ramda-ext.js","game/power.js","game/sim.js","ui/Status.js","ui/Event.js","game/events.js","game/state.js","App.js","serviceWorker.js","index.js"],"names":["styled","button","_templateObject","removeUnlessLast","index","unless","compose","equals","length","isLast","remove","rand","curry","p","d","obj","assoc","defaultTo","prop","defaultForProp","variance","converge","multiply","pipe","Math","random","add","identity","clamp","lower","upper","min","max","lensEq","curryN","lens","val","data","view","lensSatisfies","predicate","allocations","lensPath","allocation","system","power","divide","__","reallocate","amount","over","otherSystem","canDivertFrom","source","both","gt","lt","sum","values","omit","canDivertTo","destination","divert","evolve","Object","defineProperty","inc","dec","decAllocation","needsPowerManagement","START_DATE","Date","UTC","formatTime","date","toLocaleDateString","timeZone","year","month","day","weekday","weeks","randomDayOfWeek","arguments","undefined","newDate","days","round","setUTCDate","getUTCDate","log","time","supplemental","description","concat","trim","lensProp","passTime","crew","kill","count","subtract","when","hungry","food","chain","o","hunger","waste","intensiveCare","recycleWaste","set","growFood","ifElse","abs","always","hungerLevel","crewStarving","gte","embryos","refridgerateEmbryos","Infinity","negate","nextEvent","state","eventIdx","findIndex","event","condition","possibleEvents","rawEvent","nth","appendHeader","isOutcome","processedEvent","is","Function","applyTo","people","deaths","describeHunger","cond","Status","_ref","dispatch","_state$ship","ship","react_default","a","createElement","Container","Status_Crew","Status_Oxygen","percent","Status_Emphasized","label","Power","Status_SystemReadout","level","color","className","Fragment","Status_PowerControls","div","Status_templateObject","Frame","_templateObject2","CrewContainer","_templateObject3","CrewFrame","_templateObject4","CrewMember","_templateObject5","props","dead","Crew","_ref2","range","map","i","key","OxygenContainer","_templateObject6","OxygenFrame","_templateObject7","Oxygen","_ref3","style","alignSelf","OxygenBar","ratio","EmphasizedContainer","_templateObject8","EmphasizedLabel","span","_templateObject9","EmphasizedValue","_templateObject10","Emphasized","_ref4","value","children","_templateObject11","SystemReadout","_ref5","System","Label","BarFrame","Bar","_templateObject12","_templateObject13","PowerControls","_ref6","Controls","Status_Button","disabled","onClick","not","T","divertTo","divertFrom","_templateObject14","Button","BaseButton","_templateObject15","_templateObject16","_templateObject17","_templateObject18","Event_templateObject","Options","Event_templateObject2","Event","options","Event_Container","text","effect","option","outcome","stepAfter","prependOutcomeEvent","step","restartOption","initialState","terminalEvent","partialRight","prepend","outcomeEvent","radiationEventOutcome","crewDeaths","n","colonyThrives","colonySurvives","colonyDespair","colonyOutcome","colonyTooSmall","humanityThrives","humanitySurvives","tooFewEmbryos","noEmbryos","humanitysOutcome","terminalEvents","propEq","events","allPass","lifeSupport","hydroponics","cryoStorage","currentEvent","intensiveCareCount","App_templateObject","App","_this","setState","this","App_Container","assign","Component","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c2834faa.chunk.js","sourcesContent":["import styled from '@emotion/styled'\r\n\r\nexport default styled.button`\r\n  display: flex;\r\n  margin-right: 1em;\r\n  padding: 1em;\r\n\r\n  font-size: unset;\r\n  font-family: unset;\r\n  background: transparent;\r\n  color: var(--red);\r\n  border: 3px solid var(--red);\r\n  border-radius: 0.25em;\r\n  outline: none;\r\n  cursor: pointer;\r\n  user-select: none;\r\n\r\n  :disabled {\r\n    opacity: 0.15;\r\n    cursor: default;\r\n  }\r\n`\r\n","import {\r\n  compose,\r\n  equals,\r\n  unless,\r\n  remove,\r\n  curry,\r\n  assoc,\r\n  length,\r\n  defaultTo,\r\n  prop,\r\n  multiply,\r\n  min,\r\n  max,\r\n  identity,\r\n  add,\r\n  converge,\r\n  pipe,\r\n  view,\r\n  curryN,\r\n} from 'ramda'\r\n\r\nexport const isLast = index =>\r\n  compose(\r\n    equals(index + 1),\r\n    length,\r\n  )\r\n\r\nexport const removeUnlessLast = index => unless(isLast(index), remove(index, 1))\r\n\r\nexport const defaultForProp = (p, d) =>\r\n  compose(\r\n    defaultTo(d),\r\n    prop(p),\r\n  )\r\n\r\nexport const assocDefaultForProp = curry((p, d, obj) =>\r\n  assoc(p, defaultForProp(p, d)(obj))(obj),\r\n)\r\n\r\nexport const rand = variance =>\r\n  converge(multiply, [\r\n    pipe(\r\n      Math.random,\r\n      multiply(variance),\r\n      add(1 - variance / 2),\r\n    ),\r\n    identity,\r\n  ])\r\n\r\nexport const clamp = curry((lower, upper) =>\r\n  compose(\r\n    min(upper),\r\n    max(lower),\r\n  ),\r\n)\r\n\r\n// from the cookbook\r\nexport const lensEq = curryN(3, (lens, val, data) =>\r\n  pipe(\r\n    view(lens),\r\n    equals(val),\r\n  )(data),\r\n)\r\nexport const lensSatisfies = curryN(3, (predicate, lens, data) =>\r\n  pipe(\r\n    view(lens),\r\n    predicate,\r\n    equals(true),\r\n  )(data),\r\n)\r\n","import {\r\n  __,\r\n  identity,\r\n  assoc,\r\n  inc,\r\n  dec,\r\n  evolve,\r\n  lensPath,\r\n  divide,\r\n  not,\r\n  curry,\r\n  over,\r\n  compose,\r\n  prop,\r\n  sum,\r\n  values,\r\n  omit,\r\n  both,\r\n  T,\r\n  lt,\r\n  gt,\r\n  cond,\r\n  view,\r\n} from 'ramda'\r\n\r\nexport const FULL_POWER = 4\r\n\r\nexport const allocations = lensPath(['ship', 'power'])\r\n\r\nexport const allocation = system =>\r\n  compose(\r\n    prop(system),\r\n    view(allocations),\r\n  )\r\n\r\nexport const power = system =>\r\n  compose(\r\n    divide(__, FULL_POWER),\r\n    allocation(system),\r\n  )\r\n\r\nexport const reallocate = curry((system, amount) =>\r\n  over(allocations)(assoc(system, amount)),\r\n)\r\n\r\nconst incAllocation = system => over(allocations)(evolve({ [system]: inc }))\r\nconst decAllocation = system => over(allocations)(evolve({ [system]: dec }))\r\nconst otherSystem = system =>\r\n  system === 'hydroponics' ? 'cryoStorage' : 'hydroponics'\r\n\r\nexport const canDivertFrom = source =>\r\n  both(\r\n    compose(\r\n      gt(__, 0),\r\n      allocation(source),\r\n    ),\r\n    compose(\r\n      lt(__, 2 * FULL_POWER),\r\n      sum,\r\n      values,\r\n      omit([source]),\r\n      view(allocations),\r\n    ),\r\n  )\r\n\r\nexport const canDivertTo = destination =>\r\n  compose(\r\n    lt(__, 4),\r\n    allocation(destination),\r\n  )\r\n\r\nconst divert = (source, destination) =>\r\n  compose(\r\n    incAllocation(destination),\r\n    decAllocation(source),\r\n  )\r\n\r\nexport const divertTo = system =>\r\n  cond([\r\n    [\r\n      compose(\r\n        not,\r\n        canDivertTo(system),\r\n      ),\r\n      identity,\r\n    ],\r\n    [canDivertFrom('lifeSupport'), divert('lifeSupport', system)],\r\n    [canDivertFrom(otherSystem(system)), divert(otherSystem(system), system)],\r\n    [T, identity],\r\n  ])\r\n\r\nexport const divertFrom = system =>\r\n  cond([\r\n    [\r\n      compose(\r\n        not,\r\n        canDivertFrom(system),\r\n      ),\r\n      identity,\r\n    ],\r\n    [canDivertTo('lifeSupport'), divert(system, 'lifeSupport')],\r\n    [canDivertTo(otherSystem(system)), divert(system, otherSystem(system))],\r\n    [T, identity],\r\n  ])\r\n\r\nexport const needsPowerManagement = compose(\r\n  lt(__, 3 * FULL_POWER),\r\n  sum,\r\n  values,\r\n  view(allocations),\r\n)\r\n","import {\r\n  __,\r\n  divide,\r\n  gte,\r\n  assoc,\r\n  inc,\r\n  evolve,\r\n  pipe,\r\n  findIndex,\r\n  nth,\r\n  subtract,\r\n  lensPath,\r\n  chain,\r\n  converge,\r\n  add,\r\n  curry,\r\n  over,\r\n  compose,\r\n  o,\r\n  set,\r\n  multiply,\r\n  when,\r\n  is,\r\n  applyTo,\r\n  ifElse,\r\n  view,\r\n  negate,\r\n  lensProp,\r\n  lt,\r\n  gt,\r\n  always,\r\n  max,\r\n} from 'ramda'\r\nimport { removeUnlessLast, rand, clamp, lensSatisfies } from '../ramda-ext'\r\nimport { power } from './power'\r\n\r\nconst START_DATE = new Date(Date.UTC(2085, 11, 2))\r\nconst WASTE_BUILDUP_RATE = 0.25\r\nconst FOOD_GROWTH_RATE = 60\r\nconst EMBRYO_THAW_RATE = 385\r\nconst HUNGER_BEFORE_DEATH = 4\r\n\r\nconst formatDate = date =>\r\n  date.toLocaleDateString('en-us', {\r\n    timeZone: 'UTC',\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    weekday: 'long',\r\n  })\r\n\r\nconst weeksLater = (weeks, randomDayOfWeek = true) => {\r\n  const newDate = new Date(START_DATE)\r\n  const dayOfWeek = randomDayOfWeek ? Math.round(Math.random() * 6) : 0\r\n  const days = 7 * weeks + dayOfWeek\r\n  newDate.setUTCDate(newDate.getUTCDate() + days)\r\n  return newDate\r\n}\r\n\r\nexport const formatTime = compose(\r\n  formatDate,\r\n  weeksLater,\r\n)\r\n\r\nconst log = curry((time, supplemental = false) => description =>\r\n  `Commander's log, ${\r\n    supplemental ? 'supplemental' : 'earth date: ' + formatTime(time)\r\n  }.\\n\\n${description.trim()}`,\r\n)\r\n\r\nexport const time = lensProp('time')\r\nconst passTime = evolve({ time: inc })\r\n\r\nexport const crew = lensPath(['ship', 'crew'])\r\nexport const kill = count =>\r\n  compose(\r\n    over(crew, clamp(0, 50)),\r\n    over(crew, subtract(__, count)),\r\n    when(\r\n      hungry,\r\n      over(food, chain(add, o(max(count * HUNGER_BEFORE_DEATH), hunger))),\r\n    ),\r\n  )\r\n\r\nexport const waste = lensPath(['ship', 'waste'])\r\nexport const intensiveCare = lensProp('intensiveCareCount')\r\nconst recycleWaste = chain(\r\n  set(waste),\r\n  compose(\r\n    clamp(0, 1),\r\n    converge(add, [\r\n      compose(\r\n        multiply(0.03),\r\n        view(intensiveCare),\r\n      ),\r\n      converge(add, [\r\n        view(waste),\r\n        compose(\r\n          rand(0.2),\r\n          multiply(2 * WASTE_BUILDUP_RATE),\r\n          subtract(0.55),\r\n          power('lifeSupport'),\r\n        ),\r\n      ]),\r\n    ]),\r\n  ),\r\n)\r\n\r\nexport const food = lensPath(['ship', 'food'])\r\nconst growFood = chain(\r\n  over(food),\r\n  compose(\r\n    add,\r\n    Math.round,\r\n    multiply(FOOD_GROWTH_RATE),\r\n    power('hydroponics'),\r\n  ),\r\n)\r\n\r\nconst eatFood = state => {\r\n  const people = view(crew)(state)\r\n\r\n  return chain(\r\n    set(food),\r\n    compose(\r\n      clamp(people * -1 * HUNGER_BEFORE_DEATH, Infinity),\r\n      subtract(__, people),\r\n      view(food),\r\n    ),\r\n  )(state)\r\n}\r\n\r\nconst hunger = ifElse(\r\n  lensSatisfies(lt(__, 0), food),\r\n  pipe(\r\n    view(food),\r\n    Math.abs,\r\n  ),\r\n  always(0),\r\n)\r\n\r\nconst hungry = o(gt(__, 0), hunger)\r\nexport const hungerLevel = converge(divide, [\r\n  hunger,\r\n  o(multiply(HUNGER_BEFORE_DEATH), view(crew)),\r\n])\r\n// const logHunger = state => {\r\n//   console.log(hunger(state), hungerLevel(state))\r\n//   return state\r\n// }\r\n// const logDeath = deaths => state => {\r\n//   console.log(deaths + ' dead')\r\n//   return state\r\n// }\r\nconst crewStarving = o(gte(__, 1), hungerLevel)\r\nconst starve = state => {\r\n  const deaths = Math.round(Math.random() * 4)\r\n  return pipe(\r\n    // logHunger,\r\n    when(crewStarving, kill(deaths)),\r\n  )(state)\r\n}\r\n\r\nexport const embryos = lensPath(['ship', 'embryos'])\r\nconst refridgerateEmbryos = chain(\r\n  set(embryos),\r\n  compose(\r\n    clamp(0, Infinity),\r\n    converge(add, [\r\n      view(embryos),\r\n      compose(\r\n        negate,\r\n        Math.round,\r\n        rand(0.05),\r\n        multiply(EMBRYO_THAW_RATE),\r\n        subtract(1),\r\n        power('cryoStorage'),\r\n      ),\r\n    ]),\r\n  ),\r\n)\r\nexport const destroyEmbryos = n =>\r\n  chain(\r\n    set(embryos),\r\n    compose(\r\n      clamp(0, Infinity),\r\n      add(-n),\r\n      view(embryos),\r\n    ),\r\n  )\r\n\r\nexport const nextEvent = state => {\r\n  const eventIdx = findIndex(event => event.condition(state))(\r\n    state.possibleEvents,\r\n  )\r\n\r\n  const rawEvent = compose(nth(eventIdx))(state.possibleEvents)\r\n  const appendHeader = log(state.time, rawEvent.isOutcome)\r\n  const processedEvent = compose(\r\n    evolve({ description: appendHeader }),\r\n    evolve({ description: when(is(Function), applyTo(state)) }),\r\n  )(rawEvent)\r\n\r\n  return pipe(\r\n    assoc('currentEvent', processedEvent),\r\n    evolve({ possibleEvents: removeUnlessLast(eventIdx) }),\r\n  )(state)\r\n}\r\n\r\n// Step the simulation\r\nexport default pipe(\r\n  passTime,\r\n  recycleWaste,\r\n  growFood,\r\n  eatFood,\r\n  starve,\r\n  refridgerateEmbryos,\r\n  nextEvent,\r\n)\r\n","import React from 'react'\r\nimport styled from '@emotion/styled'\r\nimport { range, cond, equals, gt, always, o, __ } from 'ramda'\r\nimport BaseButton from './Button'\r\n\r\nimport { hungerLevel } from '../game/sim'\r\n\r\nimport {\r\n  needsPowerManagement,\r\n  power,\r\n  canDivertTo,\r\n  divertTo,\r\n  canDivertFrom,\r\n  divertFrom,\r\n} from '../game/power'\r\n\r\nconst describeHunger = cond([\r\n  [equals(1), always('starving')],\r\n  [gt(__, 0.75), always('critical')],\r\n  [gt(__, 0.5), always('dire')],\r\n  [gt(__, 0.25), always('severe')],\r\n  [gt(__, 0), always('bad')],\r\n])\r\n\r\nexport default function Status({ state, dispatch }) {\r\n  const {\r\n    ship: { crew, waste, food, embryos },\r\n  } = state\r\n\r\n  return (\r\n    <Container>\r\n      <Crew count={crew} />\r\n      <Oxygen percent={1 - waste} />\r\n      {food > 0 ? (\r\n        <Emphasized label=\"food\">{food}</Emphasized>\r\n      ) : (\r\n        <Emphasized label=\"hunger\">\r\n          {o(describeHunger, hungerLevel)(state)}\r\n        </Emphasized>\r\n      )}\r\n      <Emphasized label=\"embryos\">{embryos}</Emphasized>\r\n      <Power>\r\n        <SystemReadout level={power('lifeSupport')(state)} color=\"red\">\r\n          life support\r\n        </SystemReadout>\r\n        <SystemReadout level={power('hydroponics')(state)} color=\"green\">\r\n          hydroponics\r\n        </SystemReadout>\r\n        <SystemReadout level={power('cryoStorage')(state)} color=\"blue\">\r\n          cryo storage\r\n        </SystemReadout>\r\n        <div className=\"spacer\" />\r\n        {needsPowerManagement(state) && (\r\n          <>\r\n            <PowerControls\r\n              system=\"hydroponics\"\r\n              state={state}\r\n              dispatch={dispatch}\r\n            />\r\n            <PowerControls\r\n              system=\"cryoStorage\"\r\n              state={state}\r\n              dispatch={dispatch}\r\n            />\r\n          </>\r\n        )}\r\n      </Power>\r\n    </Container>\r\n  )\r\n}\r\n\r\nconst Container = styled.div`\r\n  min-width: 200px;\r\n  font-size: 16px;\r\n  margin-right: 2em;\r\n  align-items: flex-end;\r\n`\r\n\r\nconst Frame = styled.div`\r\n  border: 2px solid var(--foreground);\r\n  border-radius: 0.25em;\r\n`\r\n\r\nconst CrewContainer = styled.div`\r\n  align-items: flex-end;\r\n`\r\n\r\nconst CrewFrame = styled(Frame)`\r\n  margin: 0.25em 0em;\r\n  padding: 0.25em;\r\n  display: grid;\r\n  grid-template-columns: repeat(10, 1fr);\r\n`\r\nconst CrewMember = styled.div`\r\n  background-color: var(--yellow);\r\n  opacity: ${props => (props.dead ? 0 : 1)};\r\n  border-radius: 0.1em;\r\n  width: 0.5em;\r\n  height: 0.5em;\r\n  margin: 0.25em;\r\n  :first-of-type {\r\n    background-color: var(--red);\r\n  }\r\n`\r\n\r\nconst Crew = ({ count }) => (\r\n  <CrewContainer>\r\n    crew\r\n    <CrewFrame>\r\n      {range(0, 50).map(i => (\r\n        <CrewMember key={i} dead={i >= count} />\r\n      ))}\r\n    </CrewFrame>\r\n  </CrewContainer>\r\n)\r\n\r\nconst OxygenContainer = styled.div`\r\n  margin: 0.5em 0;\r\n  margin-left: 1.8em;\r\n  align-self: stretch;\r\n`\r\n\r\nconst OxygenFrame = styled(Frame)`\r\n  margin: 0.25em 0;\r\n  padding: 0.4em;\r\n  flex-direction: row;\r\n`\r\nconst Oxygen = ({ percent }) => (\r\n  <OxygenContainer>\r\n    <span style={{ alignSelf: 'flex-end' }}>oxygen</span>\r\n    <OxygenFrame>\r\n      <OxygenBar ratio={percent} color=\"blue\" />\r\n    </OxygenFrame>\r\n  </OxygenContainer>\r\n)\r\n\r\nconst EmphasizedContainer = styled.div`\r\n  flex-direction: row;\r\n  align-items: baseline;\r\n  margin: 0.25em 0;\r\n`\r\nconst EmphasizedLabel = styled.span`\r\n  margin-right: 0.5em;\r\n`\r\nconst EmphasizedValue = styled.span`\r\n  font-size: 30px;\r\n  color: var(--orange);\r\n`\r\n\r\nconst Emphasized = ({ label, children: value }) => (\r\n  <EmphasizedContainer>\r\n    <EmphasizedLabel>{label}</EmphasizedLabel>\r\n    <EmphasizedValue>{value}</EmphasizedValue>\r\n  </EmphasizedContainer>\r\n)\r\n\r\nconst Power = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  margin-top: 1em;\r\n`\r\n\r\nconst SystemReadout = ({ children: label, level, color }) => (\r\n  <System>\r\n    <Label>{label}</Label>\r\n    <BarFrame>\r\n      <Bar ratio={level} color={color} />\r\n    </BarFrame>\r\n  </System>\r\n)\r\n\r\nconst System = styled.div`\r\n  flex-direction: row;\r\n  position: relative;\r\n`\r\n\r\nconst Label = styled.div`\r\n  font-size: 14px;\r\n  white-space: nowrap;\r\n  align-self: flex-end;\r\n  transform-origin: 0% 0%;\r\n  transform: rotate(-90deg) translate(-10%, 75%);\r\n  position: absolute;\r\n`\r\n\r\nconst PowerControls = ({ system, state, dispatch }) => (\r\n  <Controls>\r\n    <Button\r\n      disabled={!canDivertTo(system)(state)}\r\n      onClick={() => dispatch(divertTo(system))}\r\n    >\r\n      {'▲'}\r\n    </Button>\r\n    <Button\r\n      disabled={!canDivertFrom(system)(state)}\r\n      onClick={() => dispatch(divertFrom(system))}\r\n    >\r\n      {'▼'}\r\n    </Button>\r\n  </Controls>\r\n)\r\n\r\nconst Controls = styled.div`\r\n  padding-top: 0.25em;\r\n  align-items: flex-end;\r\n`\r\n\r\nconst Button = styled(BaseButton)`\r\n  color: var(--foreground);\r\n  padding: 0.3em 0.65em;\r\n  margin: unset;\r\n  border: none;\r\n`\r\n\r\nconst BarFrame = styled(Frame)`\r\n  margin-left: 2em;\r\n  padding: 0.5em;\r\n  align-items: stretch;\r\n  height: 200px;\r\n  min-width: 2em;\r\n  justify-content: flex-end;\r\n`\r\n\r\nconst Bar = styled.div`\r\n  background-color: ${props => 'var(--' + props.color + ')'};\r\n  border-radius: 0.25em;\r\n  flex-grow: 0;\r\n  flex-shrink: 0;\r\n  flex-basis: ${props => props.ratio * 100}%;\r\n`\r\n\r\nconst OxygenBar = styled(Bar)`\r\n  height: 1.5em;\r\n`\r\n","import React from 'react'\r\nimport styled from '@emotion/styled'\r\nimport Button from './Button'\r\n\r\nconst Container = styled.div`\r\n  flex: 1 1 auto;\r\n  max-width: 1000px;\r\n  p {\r\n    margin-top: 0;\r\n    margin-bottom: 1.25em;\r\n  }\r\n`\r\n\r\nconst Options = styled.div`\r\n  flex-direction: row;\r\n`\r\n\r\nexport default ({ description, options, dispatch }) => (\r\n  <Container>\r\n    <p>{description}</p>\r\n    <Options>\r\n      {options.map(({ text, effect }, i) => (\r\n        <Button key={i} onClick={() => dispatch(effect)}>\r\n          {text}\r\n        </Button>\r\n      ))}\r\n    </Options>\r\n  </Container>\r\n)\r\n","import {\r\n  propEq,\r\n  cond,\r\n  pipe,\r\n  identity,\r\n  always,\r\n  T,\r\n  prepend,\r\n  evolve,\r\n  allPass,\r\n  gt,\r\n  gte,\r\n  partialRight,\r\n  compose,\r\n  not,\r\n  over,\r\n  add,\r\n  __,\r\n} from 'ramda'\r\n\r\nimport { lensEq, lensSatisfies } from '../ramda-ext'\r\nimport initialState from './state'\r\nimport step, {\r\n  time,\r\n  nextEvent,\r\n  crew,\r\n  kill,\r\n  waste,\r\n  embryos,\r\n  destroyEmbryos,\r\n  intensiveCare,\r\n} from './sim'\r\nimport { reallocate } from './power'\r\n\r\nconst event = (\r\n  description,\r\n  condition = T,\r\n  options = [option('Continue')],\r\n  isOutcome = false,\r\n) => ({\r\n  description,\r\n  condition,\r\n  options,\r\n  isOutcome,\r\n})\r\n\r\nconst option = (\r\n  text,\r\n  outcome = undefined,\r\n  effect = identity,\r\n  stepAfter = true,\r\n) => ({\r\n  text,\r\n  effect: pipe(\r\n    effect,\r\n    outcome\r\n      ? pipe(\r\n          prependOutcomeEvent(outcome),\r\n          nextEvent,\r\n        )\r\n      : stepAfter\r\n      ? step\r\n      : identity,\r\n  ),\r\n})\r\n\r\nconst restartOption = option('Start over', undefined, () => initialState, false)\r\n\r\nconst terminalEvent = partialRight(event, [[restartOption], false])\r\n\r\nconst outcomeEvent = description =>\r\n  event(description, undefined, undefined, true)\r\n\r\nconst prependOutcomeEvent = description =>\r\n  evolve({\r\n    possibleEvents: prepend(outcomeEvent(description)),\r\n  })\r\n\r\nconst radiationEventOutcome = crewDeaths =>\r\n  pipe(\r\n    kill(crewDeaths),\r\n    over(intensiveCare)(add(5 - crewDeaths)),\r\n    destroyEmbryos(1486),\r\n  )\r\n\r\nconst colonyThrives = lensSatisfies(gte(__, 25), crew)\r\nconst colonySurvives = lensSatisfies(gte(__, 8), crew)\r\nconst colonyDespair = lensSatisfies(gt(__, 1), crew)\r\n\r\nconst colonyOutcome = cond([\r\n  [\r\n    colonyThrives,\r\n    always(\r\n      `Not everyone made it, but there are enough of us left that we should be able to build up a healthy colony. With the living crew, we have enough personnel to work all of the equipment that was sent ahead of us, and we can excavate and fortify ourselves from the sun's radiation. It's not Earth, but after that journey, there is no group of people I'd rather be around.`,\r\n    ),\r\n  ],\r\n  [\r\n    colonySurvives,\r\n    always(\r\n      `We took quite a beating to get here. There are still enough of us -- just barely -- to operate the equipment and get a settlement going. Unfortunately we won't be able to fill every job. Survival is going to be rough, but we just might be able to do it.`,\r\n    ),\r\n  ],\r\n  [\r\n    colonyDespair,\r\n    always(\r\n      `Only a few of us survived. I've tried to keep their hopes up, but sooner or later they'll figure out that there aren't enough of us to sustain ourselves; too much work and too few people. This was it. Humanity's last stand. At least we have each other.`,\r\n    ),\r\n  ],\r\n  [\r\n    T,\r\n    always(\r\n      `It's just me. I'm all alone. I'll never see another person again. I'm not sure how long I'll last... not very. What's the point though? There's no way I can carry on. Could I have saved us? What if I had chosen differently? I'm humanity's final failure.`,\r\n    ),\r\n  ],\r\n])\r\n\r\nconst colonyTooSmall = compose(\r\n  not,\r\n  colonySurvives,\r\n)\r\nconst humanityThrives = lensSatisfies(gte(__, 4000), embryos)\r\nconst humanitySurvives = lensSatisfies(gte(__, 1000), embryos)\r\nconst tooFewEmbryos = lensSatisfies(gte(__, 1), embryos)\r\nconst noEmbryos = lensEq(embryos, 0)\r\n\r\nconst humanitysOutcome = cond([\r\n  [\r\n    noEmbryos,\r\n    always(\r\n      `Just getting to Mars was not the point. We have no future for humanity without those embryos. What could I have done differently? How many could have been saved? I guess I'll have the rest of my life to wonder. We had a good run. Achieved some incredible things... but the last human child has already died, and there is no future...`,\r\n    ),\r\n  ],\r\n  [\r\n    colonyTooSmall,\r\n    always(\r\n      `The embryos are irrelevant. There's not enough people left to operate the equipment and raise the children. That's it then. The end of the species.`,\r\n    ),\r\n  ],\r\n  [\r\n    humanityThrives,\r\n    always(\r\n      `Humanity has hope. We have enough embryos to restart and a large enough colony to support them. Mars is harsh, and not Earth, but we are survivors. We will rebuild, we will forge on.`,\r\n    ),\r\n  ],\r\n  [\r\n    humanitySurvives,\r\n    always(\r\n      `We've lost a lot of our future children and their genetic diversity. There might still be enough for us to build a stable population, but it is far from certain. Luckily there's enough crew around to help raise them and give us the best shot we can hope for, at least with what we have left. Here's to hope.`,\r\n    ),\r\n  ],\r\n  [\r\n    tooFewEmbryos,\r\n    always(\r\n      `The population projections aren't good for the number of embryos that survived. We can raise the next generation, but most likely there will be a collapse not long after. We'll have to make the best of our limited time left as a species... we tried. We tried so hard. It just wasn't enough.`,\r\n    ),\r\n  ],\r\n])\r\n\r\nconst terminalEvents = [\r\n  terminalEvent(\r\n    state => `\r\nMars at last.\r\n\r\n${colonyOutcome(state)}\r\n\r\n${humanitysOutcome(state)}\r\n\r\nThis will be my final log. The ship is grounded and I'm not a commander anymore. I'm just a civilian... a Martian. If only the people of Earth could see it.\r\n`,\r\n    propEq('time', 50),\r\n  ),\r\n  terminalEvent(\r\n    `\r\nCan't... go... on...\r\n`,\r\n    lensEq(crew, 0),\r\n  ),\r\n  terminalEvent(\r\n    `\r\ncnt breath help hlp helsiojkdmxc v\r\n`,\r\n    lensEq(waste, 1),\r\n  ),\r\n]\r\n\r\nexport default [\r\n  //\r\n  // Game start\r\n  //\r\n  event(`\r\nDoes it even make sense to talk of the date on Earth anymore? The meteor completely annihilated it. Oh God... how can this be happening? It's all gone so fast. We've had less than a year to prepare, to grieve and accept our fate, but nothing can prepare you for actually witnessing it.\r\n\r\nThis rocket, its fifty crew, and our cargo of cyrogenically frozen embryos represent the only hope to stave off extinction. Can we even make it to Mars? If we do, will we be able to survive?\r\n\r\nNASA's best only gave us \"something south of 20%\" chances. I think they were actually trying to give us hope. With as little warning as we had, it's a miracle we got this rocket in the sky at all. Let's hope it holds together.\r\n\r\nI've never been much for religion, but I'm praying now. Please, God, have mercy on our poor souls...`),\r\n  //\r\n  // Game end\r\n  //\r\n  ...terminalEvents,\r\n\r\n  //\r\n  // Other events\r\n  //\r\n  event(\r\n    `\r\nTrouble already. There was a violent collision, the whole ship shook worse than lift off. It was probably debris knocked out of earth orbit by the impact. It wouldn't take much delta V for even a satellite screw to end this mission before we've barely left the neighborhood.\r\n\r\nThe good news is we're still alive, and the hull wasn't compromised. It was a glancing blow.\r\n\r\nThe bad news is that we had to burn a significant amount of our reserve fuel to correct course, and it took out most of one of the solar arrays.\r\n\r\nThe solar array presents a real problem. We were on a tight power budget already; and now we don't even have enough to fully power the critical systems: life support, cyrogenics, hydroponics.\r\n\r\nI'll have to make some tough choices here.\r\n\r\nThe life support systems recycle the air and human waste. This is the most critical; nothing else will matter if carbon dioxide builds up and we suffocate.\r\n\r\nCryogenics represents the future of the species. Ten thousand human embryos... all that's left, besides us of course. Without full power, we can't run all of the freezers, and we'll start losing them. I've consulted with Dr. Miller, and she tells me that while there has been plenty of theorizing about the minimum viable human population, no one really knows. We can't afford to lose too many of our children.\r\n\r\nFinally, we have a stockpile of rations, but without fully powering the grow lights and other hydroponics systems, we won't be producing enough food to keep up with consumption. There wasn't enough cargo space for food for the whole trip, plus we'll need the crops when we get to Mars anyway. If we don't keep up with food production, in a couple of months we'll be starving.\r\n\r\nClark says that we can afford to divert some power away from life support to the other systems for a little while, but if the supply of breathable air drops too far we'll need to shift it back. It's going to be a balancing act.\r\n\r\nAnderson has been studying the imagery from the cameras and drones and thinks that if we could get out there and replace some of the couplers, the panels might still produce enough power to make a difference. Not everything we need, but we'd be better off than we are now.\r\n\r\nThe problem is that we're really still flying blind here. We didn't see whatever hit us, and even though space is huge, that meteor flung a lot of high speed debris. We occasionally hear pings from smaller bits bouncing off the hull.\r\n\r\nAnderson's plan is risky. It requires 3 crew in an approximately 4 hour EVA. If anything else hits us or there is some problem, we might not be able to get them back.\r\n\r\nI'm exhausted. I need to get some rest and think this over.\r\n\r\nA quick note about the crew: Hitchens almost completely lost it when that thing hit us. Dr. Amin gave him a seditive, but I think PTSD is going to be something most of us will struggle with.`,\r\n    propEq('time', 1),\r\n    [\r\n      option(\r\n        'Order the repair mission',\r\n        `\r\nI should have listened to my instincts. Anderson, Wu, and Yorke went out to make the repairs. Around the third hour, while working on the second coupler, we got hit again. A piece of it smashed directly into Yorke.. he was obliterated. Anderson was tethered to him. They're both gone. I'm not sure if Anderson survived the impact, but if he did, he has just over an hour of oxygen left. The thought of him tumbling through space, alone and hopeless... not to mention Yorke, who was a good kid.\r\n\r\nWu made it back, but everyone is badly shaken by what's happened.\r\n\r\nTheir work did restore about a quarter of the original capacity of the array. It's not much, but it might be enough to save some lives down the line.\r\n\r\nAnderson and Yorke. Their sacrifice will be remembered.`,\r\n        pipe(\r\n          kill(2),\r\n          reallocate('hydroponics', 2),\r\n          reallocate('cryoStorage', 2),\r\n          reallocate('lifeSupport', 3),\r\n        ),\r\n      ),\r\n      option(\r\n        'Leave it alone',\r\n        `\r\nWell, it was good that we didn't send anyone out there. Another large chunk of debris hit us and pretty much took out the rest of that array. We're going to be low on power, but it could be worse.\r\n\r\nLet's hope it's not worse.\r\n`,\r\n        pipe(\r\n          reallocate('hydroponics', 2),\r\n          reallocate('cryoStorage', 2),\r\n          reallocate('lifeSupport', 2),\r\n        ),\r\n      ),\r\n    ],\r\n  ),\r\n\r\n  event(\r\n    `\r\nThings keep getting worse. We got hit with an unxpected blast of radiation from a solar flare. The ship is shielded as best as it can be but some sections had to be left more exposed -- in particular, one of the lower sections of cryo storage was extremely exposed. We've lost all of the embryos there, just under 1,500 of them. At this point that represents a significant portion of humanity, which makes that solar flare one of the greatest tragedies, behind, of course, the meteor.\r\n\r\nIt's worse than that. The five crewmembers that were there -- Ackerman, Nguyen, O'Brien, Rosenfield, and Kraus -- were badly injured. Dr. Amin tells me the dose they received was definitely mortal. The cries of pain... you can hear everything in this ship. She gives them only a few months at most.\r\n\r\nRosenfield, when he was lucid, realized his fate and asked to be given a less painful death. I can't say I blame him. Nguyen overheard and was shocked -- despite the pain he wants to hang on and fight for his life. Amin tells me that's unrealistic.\r\n\r\nThe other three are comatose and probably won't ever wake.\r\n\r\nHere's the problem: the intensive care equipment we're running to keep them alive drastically reduces the efficency of the other life support systems.\r\n\r\nThey have no future, but in the present they're stretching our already tight resources to the breaking point. Should I grant Rosenfield his request? What about the rest of them? Do we shoulder the burden of keeping them alive, when we're doomed to fail? This mission isn't getting any easier.\r\n\r\nGod what a horror.\r\n`,\r\n    allPass([\r\n      lensSatisfies(gte(__, 25), time),\r\n      lensSatisfies(gte(__, 7), crew),\r\n      pipe(\r\n        Math.random,\r\n        gt(__, 0.8),\r\n      ),\r\n    ]),\r\n    [\r\n      option(\r\n        'Euthanize Rosenfield',\r\n        `\r\nI'm going to grant Rosenfield his wish. It's the only humane thing to do, and I can't bear to see him suffer. Nguyen still wants to hang on, and the others -- well I don't feel right making that kind of choice for them. Who knows, there's always a chance... and we need as much hope as we can get right now.\r\n`,\r\n        radiationEventOutcome(1),\r\n      ),\r\n      option(\r\n        'Euthanize all but Nguyen',\r\n        `Rosenfield wants out, so I'm going to let him go. Nguyen wants to stay and fight. Truly admirable, so he will stay. The others -- with no chance of recovery and the strain on our resources, I've made the difficult decision to let them go too. May they find the peace we all seek.`,\r\n        radiationEventOutcome(4),\r\n      ),\r\n      option(\r\n        'Euthanize them all',\r\n        `\r\nI have to be realistic. We're barely holding on as it is, and it was tragic what happened to them, but we can't save them now. The less resources we consume the better chance we have of making it to Mars.\r\n\r\nRosenfield will get his wish. Nguyen... I ordered Amin to do it when he was sleeping. I think it's better for him and the rest of us this way.\r\n\r\nThe others, I can only hope their souls forgive me for what I've done. Sacrifices must be made.\r\n`,\r\n        radiationEventOutcome(5),\r\n      ),\r\n      option(\r\n        'Do nothing',\r\n        `\r\nRosenfield and Nguyen, though in pain, are still occasionally lucid. They have some time left in their lives, and while they're members of my crew I still need their help. No, they won't be servicing the life support or cyro systems, but they have valuable knowledge that we can't just give up.\r\n\r\nIt will be tough for them, but this is a mission of survival. Perseverence is paramount and the crew will be well served by their example of sacrifice.\r\n\r\nThe truth is, after everything we've been through, I just can't bring myself to give the order. Every human life seems too precious to forsake.\r\n`,\r\n        radiationEventOutcome(0),\r\n      ),\r\n    ],\r\n  ),\r\n  //\r\n  // If no other event happened this step\r\n  //\r\n  event('Nothing of interest to report.'),\r\n]\r\n","import { nextEvent } from './sim'\r\nimport events from './events'\r\nimport { FULL_POWER } from './power'\r\n\r\nexport default nextEvent({\r\n  time: 0, // weeks\r\n\r\n  ship: {\r\n    crew: 50,\r\n    waste: 0,\r\n    food: 400,\r\n    embryos: 10000,\r\n\r\n    // Power allocations as quarters, i.e. 4/4 is 100%\r\n    power: {\r\n      lifeSupport: FULL_POWER,\r\n      hydroponics: FULL_POWER,\r\n      cryoStorage: FULL_POWER,\r\n    },\r\n  },\r\n\r\n  currentEvent: undefined,\r\n  possibleEvents: events,\r\n\r\n  intensiveCareCount: 0,\r\n})\r\n","import React, { Component } from 'react'\r\nimport styled from '@emotion/styled'\r\nimport Status from './ui/Status'\r\nimport Event from './ui/Event'\r\n\r\nimport initialState from './game/state'\r\n\r\nconst Container = styled.div`\r\n  --foreground: #cbcdd2;\r\n  --blue: #4fb4d8;\r\n  --green: #78bd65;\r\n  --orange: #ef7c2a;\r\n  --red: #eb3d54;\r\n  --yellow: #e5cd52;\r\n\r\n  color: var(--foreground);\r\n  padding: 1em;\r\n  font-size: 20px;\r\n  white-space: pre-wrap;\r\n  flex-direction: row;\r\n`\r\n\r\nclass App extends Component {\r\n  state = initialState\r\n\r\n  dispatch = event => {\r\n    this.setState(state => event(state))\r\n  }\r\n\r\n  render() {\r\n    const { state, dispatch } = this\r\n    return (\r\n      <Container>\r\n        <Status state={state} dispatch={dispatch} />\r\n        <Event {...state.currentEvent} dispatch={dispatch} />\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}